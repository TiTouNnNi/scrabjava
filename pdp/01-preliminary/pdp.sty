% =============================================================================
% pdp.sty - Style for "Projet de Programmation" at Universit√© de Bordeaux
% ============================================================================

%------------------------------------------------------------------------------
%	FONTS
%------------------------------------------------------------------------------

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

\usepackage{lmodern}
\usepackage{palatino}
\renewcommand\ttdefault{pcr}

%------------------------------------------------------------------------------
%	MARGINS AND SPACING
%------------------------------------------------------------------------------

\usepackage{geometry}
\geometry{
  top=1cm, % Top margin
  bottom=1.5cm, % Bottom margin
  left=1.5cm, % Left margin
  right=1.5cm, % Right margin
  includehead, % Include space for a header
  includefoot, % Include space for a footer
}

%------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%------------------------------------------------------------------------------

\usepackage[french]{babel}

\usepackage{tikz}
\usetikzlibrary{calc}

\usepackage{minted} % Required for including code snippets
\setminted{fontfamily=tt}

\usepackage{graphicx}
\usepackage{hyperref}
\usepackage[svgnames]{xcolor} % Enabling colors by their 'svgnames'

%------------------------------------------------------------------------------
%	CUSTOM MACROS AND COMMANDS
%------------------------------------------------------------------------------

\newcommand{\subtitle}[1]{\def\thesubtitle{#1}}
\newcommand{\theacademicyear}{%
  \ifnum\month < 7
    \advance\year by -1 \number\year--\advance\year by 1 \number\year
  \else
    \number\year--\advance\year by 1 \number\year
  \fi
}

%------------------------------------------------------------------------------
%	HEADERS AND FOOTERS
%------------------------------------------------------------------------------

\usepackage{fancyhdr}
\pagestyle{fancy}

\renewcommand{\headrulewidth}{0pt} % No header rule
\renewcommand{\footrulewidth}{0.4pt} % Thin footer rule
\renewcommand{\sectionmark}[1]{\markboth{#1}{}}

% Default Headers
\fancyhead[L]{}
\fancyhead[C]{}
\fancyhead[R]{}

% Default Footers
\fancyfoot[L]{}
\fancyfoot[C]{}
\fancyfoot[R]{\footnotesize\thepage}

%------------------------------------------------------------------------------
%	TITLE PAGE
%------------------------------------------------------------------------------

\usepackage[compact]{titlesec}
\usepackage{titling}
\newcommand{\HRule}{\rule{\linewidth}{1pt}}

\pretitle{%
  \begin{tikzpicture}[remember picture, overlay, transform shape]
    \node[anchor=north west, inner sep=0pt]
    at ($(current page.north west) + (42pt, -40pt)$)
    {
      \begin{minipage}{.5\textwidth}%
        \Large\bfseries\sffamily%
        Projet de Programmation\\
        Master Informatique\\
        \theacademicyear%
      \end{minipage}%
    };
    \node[anchor=north east, inner sep=0pt]
    at ($(current page.north east) - (40pt, 25pt)$)
    {
      \includegraphics[scale=.2]{Universite_de_Bordeaux-wb.pdf}
    };
  \end{tikzpicture}

  \vspace{-25pt}
  \noindent\HRule%
  \vspace{0pt} % Horizontal rule before the title
  \fontsize{32}{36}\usefont{T1}{ppl}{b}{n}\selectfont % Palatino
  \color{DarkBlue} % Text color for the title and author(s)
}

\posttitle{%
  \ifdefined\thesubtitle
    \par\vskip 5pt% Whitespace under the title
      {\large\thesubtitle\newline}% Subtitle
  \fi
}

\preauthor{%
  \vskip 0pt%
} % Anything that will appear before \author is printed

\postauthor{ % Anything that will appear after \author is printed
  \par%
  \noindent\HRule % Horizontal rule after the title
}
